CC=x86_64-w64-mingw32-gcc

CFLAGS = 

LDFLAGS=-lntdll


SRC=./src

all: poc_exploit.exe

debug: CFLAGS += -DDEBUG
debug: poc_exploit.exe

%.exe: $(SRC)/%.c
	$(CC) $(CFLAGS) -I includes/ $^ -o $@ $(LDFLAGS)

poc_exploit.exe: src/debug.c src/pagedpool_utils.c  src/poc_exploit.c  src/vuln.c src/nonpagedpool_utils.c  src/pipe_utils.c  \
				src/utils.c  src/vuln_driver_client.c

clean:
	rm *.exe
